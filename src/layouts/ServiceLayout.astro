---
import MainLayout from "@/layouts/MainLayout.astro";
import {
  generateBreadcrumbSchema,
  generateServiceSEO,
  generateServiceSchema,
  generateFAQSchema,
  REVIEWS_SCHEMA,
} from "@/config/seo";
import type { Service } from "@/config/services";

interface Props {
  service: Service;
}

const { service } = Astro.props;

const seo = generateServiceSEO(service);

const schema = generateServiceSchema(service);

const breadcrumbs = [
  { name: "Inicio", url: "/" },
  { name: "Servicios", url: "/servicios" },
  { name: service.title, url: `/servicios/${service.slug}` },
];

const breadcrumbSchema = generateBreadcrumbSchema(breadcrumbs);

// Generate FAQ schema if service has FAQs
const faqSchema = service.faqs ? generateFAQSchema(service.faqs) : null;

// Include REVIEWS_SCHEMA since all service pages display SocialProof component
const schemas = [breadcrumbSchema, schema, REVIEWS_SCHEMA, ...(faqSchema ? [faqSchema] : [])];
---

<MainLayout seoProps={seo} aditionalSchemas={schemas}>
  <slot />
</MainLayout>
