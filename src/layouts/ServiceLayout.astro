---
import { Image } from "astro:assets";
import MainLayout from "@/layouts/MainLayout.astro";
import {
  generateBreadcrumbSchema,
  generateServiceSEO,
  generateServiceSchema,
} from "@/config/seo";
import type { Service } from "@/config/services";
import CTABanner from "@/components/ui/CTABanner.astro";

interface Props {
  service: Service;
}

const { service } = Astro.props;

const seo = generateServiceSEO(service);

const schema = generateServiceSchema(service);

const breadcrumbs = [
  { name: "Inicio", url: "/" },
  { name: "Servicios", url: "/servicios" },
  { name: service.title, url: `/servicios/${service.slug}` },
];

const breadcrumbSchema = generateBreadcrumbSchema(breadcrumbs);

const schemas = [breadcrumbSchema, schema];
---

<MainLayout seoProps={seo} aditionalSchemas={schemas}>
  <!-- Hero Section - Introduces the service -->
  <section class="hero-service w-full mx-auto">
    <div class="max-w-7xl mx-auto px-4 py-8 md:py-16 lg:py-24">
      <div
        class="flex flex-col items-center justify-center min-h-[60vh] text-center"
      >
        <div class="max-w-4xl">
          <!-- Service Title - H1 for SEO -->
          <h1
            class="text-[min(10vw,72px)] font-playfair font-medium text-smokyBlack leading-tight tracking-tight mb-4"
          >
            {service.title}
          </h1>

          <!-- Subtitle -->
          {
            service.subtitle && (
              <h2 class="text-[min(5vw,42px)] font-playfair italic text-smokyBlack mb-6">
                {service.subtitle}
              </h2>
            )
          }

          <!-- SEO Description -->
          <p
            class="text-[min(5vw,24px)] font-openSans text-smokyBlack mb-8 max-w-2xl mx-auto"
          >
            {service.seoDescription}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content Section -->
  <section
    class="service-content w-full bg-gradient-to-b from-transparent to-softBeige/10"
  >
    <div class="max-w-6xl mx-auto px-4 py-12 md:py-20">
      <div class="flex flex-col md:flex-row gap-12 md:gap-16 items-center">
        <!-- Service Image -->
        <div class="w-full md:w-1/2">
          <Image
            src={service.image}
            alt={service.alt}
            width={600}
            height={600}
            class="w-full h-auto rounded-lg shadow-2xl"
            loading="eager"
          />
        </div>

        <!-- Service Details -->
        <div class="w-full md:w-1/2">
          <!-- Problem Statement (if exists) -->
          {
            service.problem && (
              <div class="mb-6">
                <p class="text-softLavender font-openSans font-medium text-xl italic">
                  {service.problem}
                </p>
              </div>
            )
          }

          <!-- Main Content -->
          <div class="mb-8">
            <p
              class="text-smokyBlack font-openSans text-lg md:text-xl leading-relaxed"
            >
              {service.content}
            </p>
          </div>

          <!-- Benefits List (if exists) -->
          {
            service.benefits && service.benefits.length > 0 && (
              <div class="mt-8">
                <h3 class="text-smokyBlack font-playfair text-2xl md:text-3xl mb-4">
                  ¿Qué incluye?
                </h3>
                <ul class="flex flex-col gap-3">
                  {service.benefits.map((benefit) => (
                    <li class="text-smokyBlack font-openSans text-base md:text-lg flex items-start gap-3">
                      <span class="w-2 h-2 bg-accentGold rounded-full flex-shrink-0 mt-2" />
                      {benefit}
                    </li>
                  ))}
                </ul>
              </div>
            )
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Custom Content Slot - Allows page-specific sections -->
  <slot />

  <!-- Call-to-Action Banner -->
  <CTABanner
    title="¿Listo para transformar tu presencia digital?"
    description={`Agenda una consulta y descubre cómo ${service.title.toLowerCase()} puede impulsar tu negocio.`}
    buttonText="Agenda tu consulta"
    buttonHref="/contacto"
    variant="default"
    className="max-w-6xl mx-auto"
  />
</MainLayout>
