---
import Logo from "@/assets/images/logoshinewhitecharacters.svg";
import { navBarLinksConst, servicesLinksConst } from "@/utils/navigation";
import { COMPANY_INFO } from "@/config/seo";
import InstagramIcon from "@/assets/icons/instagram.svg";
import LinkedInIcon from "@/assets/icons/linkedin.svg";
import TikTokIcon from "@/assets/icons/tiktok.svg";
import ArrowUpIcon from "@/assets/icons/arrowUp.svg";
import WhatsAppIcon from "@/assets/icons/whatsapp.svg";
import Button from "@/components/ui/button.astro";
import DropdownIcon from "@/assets/icons/dropdown.svg";
const currentPathRaw = decodeURIComponent(Astro.url.pathname);
const currentPath =
  currentPathRaw !== "/" && currentPathRaw.endsWith("/")
    ? currentPathRaw.slice(0, -1)
    : currentPathRaw;
---

<footer class="w-full border-t border-softBeige/5 bg-smokyBlack relative mt-20">
  <!-- Main Footer Content -->
  <div class="max-w-7xl mx-auto px-4 py-4 lg:py-8">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-8">
      <!-- Company Section -->
      <div class="lg:col-span-2">
        <div class="mb-3">
          <a href="/" aria-label="Home" class="inline-block">
            <Logo class="h-16 w-auto object-contain" />
          </a>
        </div>
        <h3 class="text-lg font-playfair font-medium text-softWhite mb-3">
          Brilla con propósito
        </h3>
        <p
          class="prose text-softWhite/80 font-openSans leading-relaxed mb-6 max-w-md"
        >
          Transformamos tu presencia digital con estrategia, propósito y
          autenticidad. Diseño web, marketing digital y contenido que refleja tu
          verdadera esencia.
        </p>

        <!-- Social Media -->
        <div class="flex space-x-4">
          <a
            href={COMPANY_INFO.socialMedia.instagram}
            target="_blank"
            rel="noopener noreferrer"
            class="text-softWhite hover:text-accentGold transition-colors duration-300"
            aria-label="Instagram"
          >
            <InstagramIcon fill="currentColor" />
          </a>
          <a
            href={COMPANY_INFO.socialMedia.linkedin}
            target="_blank"
            rel="noopener noreferrer"
            class="text-softWhite hover:text-accentGold transition-colors duration-300"
            aria-label="LinkedIn"
          >
            <LinkedInIcon />
          </a>
          <a
            href={COMPANY_INFO.socialMedia.tiktok}
            target="_blank"
            rel="noopener noreferrer"
            class="text-softWhite hover:text-accentGold transition-colors duration-300"
            aria-label="TikTok"
          >
            <TikTokIcon />
          </a>
          <a
            href={COMPANY_INFO.socialMedia.whatsapp}
            target="_blank"
            rel="noopener noreferrer"
            class="text-softWhite hover:text-accentGold transition-colors duration-300"
            aria-label="WhatsApp"
          >
            <WhatsAppIcon width="26" height="26" fill="currentColor" />
          </a>
        </div>
      </div>

      <!-- Navigation Links -->
      <div>
        <h4 class="text-lg font-playfair font-medium text-softWhite mb-3">
          Navegación
        </h4>
        <ul class="space-y-3">
          {
            navBarLinksConst
              .filter((item) => item.path !== "/contacto")
              .map((item) => (
                <li>
                  <a
                    href={item.path}
                    class="text-softWhite hover:text-accentGold font-openSans transition-colors duration-300"
                  >
                    {item.name}
                  </a>
                </li>
              ))
          }
          <div class="flex flex-col">
            <a
              href="#"
              id="footer-services"
              class="flex items-center space-x-2 text-softWhite font-openSans hover:text-accentGold transition-colors duration-200"
              class:list={{
                "underline underline-offset-3": currentPath === "/servicios",
              }}
              aria-current={currentPath === "/servicios" ? "page" : undefined}
            >
              <span> Servicios </span>
              <DropdownIcon class="w-2 h-2" />
            </a>
            <div id="footer-services-dropdown" class="hidden mt-0.5">
              <ul class="list-none space-y-1">
                {
                  servicesLinksConst.map((link) => (
                    <li>
                      <a
                        href={link.path}
                        class={`text-softWhite font-openSans ${link.path === currentPath ? "underline underline-offset-3" : ""}`}
                        aria-current={
                          link.path === currentPath ? "page" : undefined
                        }
                      >
                        {link.name}
                      </a>
                    </li>
                  ))
                }
              </ul>
            </div>
          </div>
          <a
            href="/contacto"
            class="text-softWhite hover:text-accentGold font-openSans transition-colors duration-300"
            >Contacto</a
          >
        </ul>
      </div>
    </div>

    <!-- Contact Information -->
    <div class="mt-6 pt-4 border-t border-softBeige">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <h5 class="font-playfair font-medium text-softWhite mb-2">
            Ubicación
          </h5>
          <p class="text-softWhite/70 font-openSans text-sm">
            {COMPANY_INFO.address.city}, {COMPANY_INFO.address.country}
          </p>
        </div>
        <div>
          <h5 class="font-playfair font-medium text-softWhite mb-2">
            Contacto
          </h5>
          <p class="text-softWhite/70 font-openSans text-sm">
            <a
              href={`mailto:${COMPANY_INFO.email}`}
              class="hover:text-accentGold transition-colors duration-300"
            >
              {COMPANY_INFO.email}
            </a>
          </p>
          <p class="text-softWhite/70 font-openSans text-sm">
            <a
              href={`tel:${COMPANY_INFO.phone}`}
              class="hover:text-accentGold transition-colors duration-300"
            >
              {COMPANY_INFO.phone}
            </a>
          </p>
        </div>
        <div class="md:text-right md:w-fit">
          <Button
            href="#"
            type="button"
            variant="primary"
            className="font-poppins flex items-center gap-2"
            id="back-to-top"
          >
            <ArrowUpIcon />
            Volver al inicio
          </Button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="bg-softBeige/5">
    <div class="max-w-7xl mx-auto px-4 py-1">
      <div
        class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"
      >
        <div
          class="text-softWhite/40 font-openSans text-sm text-center md:text-left"
        >
          <small
            >&copy; {new Date().getFullYear()}
            {COMPANY_INFO.name}. Todos los derechos reservados.</small
          >
        </div>
        <div class="flex space-x-6 text-sm font-openSans">
          <a
            href="/politicadeprivacidad"
            class="text-softWhite/40 hover:text-accentGold transition-colors duration-300"
          >
            <small>Política de Privacidad </small>
          </a>
          <a
            href="/terminosycondiciones"
            class="text-softWhite/40 hover:text-accentGold transition-colors duration-300"
          >
            <small>Términos y Condiciones</small>
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  import { footerServicesDropdownAnimation } from "@/utils/scripts/globalAnimations/servicesDropdownAnimation";
  footerServicesDropdownAnimation();
  // Back to top functionality
  const backToTopButton = document.getElementById("back-to-top");

  if (backToTopButton) {
    backToTopButton.addEventListener("click", () => {
      window.scrollTo({
        top: 0,
        behavior: "smooth",
      });
    });
  }
</script>
