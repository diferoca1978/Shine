---
import { services } from "@/config/services";
import Star from "@/assets/icons/star40x40.svg";
import { Image } from "astro:assets";
import Button from "@/components/ui/button.astro";
import CTABanner from "@/components/ui/CTABanner.astro";
---

<section id="services" class="services-section relative min-h-screen">
  <div class="wrapper w-full h-screen relative">
    <h2
      class="text-center text-smokyBlack font-playfair font-medium text-4xl md:text-5xl lg:text-6xl"
    >
      Nuestros Servicios
    </h2>

    <!-- Indicador de línea con estrella -->
    <div class="indicators absolute left-8 top-0 mt-[10vh] h-[80vh] w-1">
      <!-- Línea de fondo -->
      <div
        class="indicator-line w-full h-full bg-softBeige rounded-full relative"
      >
        <!-- Estrella móvil -->
        <div
          class="indicator-star absolute left-1/2 -translate-x-1/2 text-accentGold text-lg z-10"
          style="top: 0%;"
        >
          <Star class="w-16 h-16" />
        </div>
      </div>
    </div>

    <!-- Servicios -->
    {
      services.map(
        ({ slug, title, subtitle, problem, content, benefits, image, alt }) => (
          <div class="point flex h-screen w-full flex-col items-center justify-center gap-x-20 gap-y-12 p-16 md:flex-row lg:gap-x-40">
            <div class="w-full max-w-md md:max-w-lg lg:max-w-xl">
              <Image
                src={image}
                alt={alt}
                width={350}
                height={350}
                class="w-full h-auto hidden lg:block"
              />
            </div>
            <article class="flex flex-col gap-4 md:gap-6 max-w-2xl">
              <h3 class="text-softBeige font-playfair text-center md:text-left text-3xl md:text-4xl lg:text-5xl leading-tight tracking-tight">
                {title}
              </h3>
              {subtitle && (
                <h4 class="text-softBeige font-poppins text-center md:text-left text-xl md:text-2xl font-semibold">
                  {subtitle}
                </h4>
              )}
              {problem && (
                <p class="text-softLavender font-openSans font-medium text-[min(5vw,20px)] text-center md:text-left text-lg italic leading-tight">
                  {problem}
                </p>
              )}
              <p class="text-softBeige font-openSans text-lg md:text-xl leading-relaxed hidden md:block">
                {content}
              </p>
              {benefits && (
                <h4 class="text-softBeige font-poppins m-0 text-center md:text-left text-xl md:text-2xl font-semibold leading-tight">
                  ¿Qué incluye?
                </h4>
                <ul class="flex flex-col gap-2">
                  {benefits.map((benefit) => (
                    <li class="text-softBeige font-medium font-openSans text-base flex items-center gap-2">
                      <span class="w-2 h-2 bg-accentGold rounded-full flex-shrink-0" />
                      {benefit}
                    </li>
                  ))}
                </ul>
              )}

              <div class="mt-4 flex justify-center md:justify-start">
                <Button
                  href={`/servicios/${slug}`}
                  variant="optional1"
                  className="cursor-pointer"
                >
                  Ver más detalles
                  <svg
                    class="w-5 h-5 transition-transform hover:translate-x-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 8l4 4m0 0l-4 4m4-4H3"
                    />
                  </svg>
                </Button>
              </div>
            </article>
          </div>
        ),
      )
    }
  </div>
  <CTABanner
    title="¡Transforma tu Negocio Digital!"
    description="Comienza hoy a diseñar la estrategia digital que tu negocio merece."
    buttonText="Contáctanos ahora"
    buttonHref="/contacto"
    variant="default"
    className="max-w-6xl mx-auto mt-16"
  />
</section>

<script>
  import { servicesAnimation } from "@/utils/scripts/servicesAnimation.js";

  document.addEventListener("DOMContentLoaded", () => {
    servicesAnimation();
  });
</script>
