---
import Form from "@/components/ui/ContactForm.astro";
import Star from "@/assets/icons/star40x40.svg";
import Rocket from "@/assets/images/rocket.webp";
import { Image } from "astro:assets";
---

<section class="contact-section w-full mx-auto">
  <div
    class="flex flex-col md:flex-row items-center justify-center max-w-6xl mx-auto gap-4 md:gap-8"
  >
    <div class="md:w-1/2">
      <div class="relative items-center justify-center hidden md:flex">
        <!-- Random positioned stars -->
        <Star class="absolute top-18 left-20 animate-pulse" />
        <Star class="absolute top-32 right-16 animate-pulse delay-300" />
        <Star class="absolute bottom-24 left-12 animate-pulse delay-700" />
        <Star class="absolute bottom-16 right-24 animate-pulse delay-500" />
        <Star class="absolute bottom-32 right-12 animate-pulse delay-400" />
        <Star class="absolute bottom-42 left-12 animate-pulse delay-400" />

        <!-- Rocket -->
        <Image
          id="contact-rocket"
          src={Rocket}
          alt="Rocket"
          height={350}
          width={350}
          class="relative z-10 opacity-0"
        />
      </div>
    </div>
    <div id="contact-form" class="md:w-1/2 opacity-0 p-4 lg:p-0">
      <Form />
    </div>
  </div>
</section>

<script>
  import {
    contactRocketAnimation,
    launchRocket,
  } from "@/utils/scripts/contactRocketAnimation.js";

  document.removeEventListener("DOMContentLoaded", contactRocketAnimation);
  document.addEventListener("DOMContentLoaded", contactRocketAnimation);

  // Listen for form success event
  document.addEventListener("formSuccess", () => {
    setTimeout(() => {
      launchRocket();
    }, 300); // Small delay after success message appears
  });
</script>
